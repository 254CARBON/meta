<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ metadata.title }} - {{ service_info.name }}</title>
    <link rel="stylesheet" href="assets/dashboard.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="dashboard-header">
        <h1>🔧 {{ service_info.name }} Service Dashboard</h1>
        <p class="timestamp">Generated: {{ metadata.generated_at }}</p>
    </div>

    <div class="service-info-section">
        <h2>📋 Service Information</h2>
        <ul>
            <li><strong>Name:</strong> {{ service_info.name }}</li>
            <li><strong>Domain:</strong> {{ service_info.domain }}</li>
            <li><strong>Maturity:</strong> {{ service_info.maturity }}</li>
            <li><strong>Version:</strong> {{ service_info.version }}</li>
            <li><strong>Runtime:</strong> {{ service_info.runtime }}</li>
            <li><strong>Repository:</strong> <a href="{{ service_info.repo }}">{{ service_info.repo }}</a></li>
        </ul>
    </div>

    <div class="metrics-grid">
        <div class="metric-card">
            <div class="metric-label">Quality Score</div>
            <div class="metric-value {% if quality_metrics.score >= 80 %}status-good{% elif quality_metrics.score >= 70 %}status-warning{% else %}status-danger{% endif %}">
                {{ quality_metrics.score|round(1) }}
            </div>
        </div>

        <div class="metric-card">
            <div class="metric-label">Grade</div>
            <div class="metric-value">{{ quality_metrics.grade }}</div>
        </div>

        <div class="metric-card">
            <div class="metric-label">Test Coverage</div>
            <div class="metric-value {% if quality_metrics.metrics.coverage >= 0.8 %}status-good{% elif quality_metrics.metrics.coverage >= 0.7 %}status-warning{% else %}status-danger{% endif %}">
                {{ (quality_metrics.metrics.coverage * 100)|round(1) }}%
            </div>
        </div>

        <div class="metric-card">
            <div class="metric-label">Drift Issues</div>
            <div class="metric-value {% if drift_issues.issues|length == 0 %}status-good{% else %}status-warning{% endif %}">
                {{ drift_issues.issues|length }}
            </div>
        </div>
    </div>

    <div class="chart-container">
        <h2>📈 Quality Trend</h2>
        {{ charts.quality_trend|safe }}
    </div>

    <div class="dependencies-section">
        <h2>🔗 Dependencies</h2>
        <h3>Internal Dependencies</h3>
        <ul>
        {% for dep in dependencies.internal %}
            <li>{{ dep }}</li>
        {% endfor %}
        </ul>

        <h3>External Dependencies</h3>
        <ul>
        {% for dep in dependencies.external %}
            <li>{{ dep }}</li>
        {% endfor %}
        </ul>
    </div>

    <div class="drift-section">
        <h2>🔍 Drift Issues</h2>
        {% if drift_issues.issues %}
        <ul>
        {% for issue in drift_issues.issues %}
            <li class="drift-issue-{{ issue.severity }}">
                <strong>{{ issue.type }}:</strong> {{ issue.description }}
            </li>
        {% endfor %}
        </ul>
        {% else %}
        <p class="status-good">✅ No drift issues detected</p>
        {% endif %}
    </div>

    <div class="footer">
        <p>🤖 Generated by 254Carbon Meta Repository</p>
        <p><a href="index.html">Back to Platform Overview</a></p>
    </div>

    <script src="assets/dashboard.js"></script>
</body>
</html>
